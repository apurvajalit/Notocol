@using Model.Extended
@model IList<SourceItem>

@{
    int count = 0;
    foreach (var source in Model)
    {
     
      
            if (count % 4 == 0){ 
                @:<div class="row">
            }
            count++;

            <div class="col-sm-3 pageBoxContainer">
                <div class="pagebox">
                    
                    @if (!(source.Link.StartsWith("localFile")))
                    {
                        <a href="@source.Link" class="page-title text-info">@source.Title</a>
                    }
                    else
                    {
                        <p class="page-title text-info">@source.Title</p>                                              
                    }
                    
                    <p>@source.Summary</p>
                    <div>
                        @if (!(@String.IsNullOrEmpty(source.TagNames)))
                        {
                            <div class="tagsText"><span class="glyphicon glyphicon-tag"></span> @source.TagNames </div>
                        }
                        <div class="viewNotesButton">
                            <button class="btn btn-default btn-xs " href="@Url.Action("NoteList", "Notes", new { sourceID = @source.ID })" data-toggle="modal" data-target='#notesModal'>View Notes</button>


                        </div>
                    </div>
                </div>


            </div>

        if (((count) % 4 == 0) || count == Model.Count)
        {
                @: </div>
            }


      }
}


                <div class="modal" id="notesModal">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title" id="mymodallabel">Notes</h4>
                            </div>
                            <div class="modal-body"></div>
                        </div>

                        <div class="modal-footer">

                        </div>

                    </div>
                </div>
                <script>
                    $('body').on('hidden.bs.modal', '.modal', function () {
                        $(this).removeData('bs.modal').find(".modal-content").empty();;
                    });
                </script>





